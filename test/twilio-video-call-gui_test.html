<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

    <title>twilio-video-call-gui test</title>

    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../../web-component-tester/browser.js"></script>

    <link rel="import" href="../twilio-video-call-gui.html">
  </head>
  <body>
    <test-fixture id="basic">
      <template>
        <twilio-video-call-gui></twilio-video-call-gui>
      </template>
    </test-fixture>

    <script>
      suite('twilio-video-call-gui', function () {
        var element

        setup(function () {
          element = fixture('basic')
        })

        test('instantiating the element works', function () {
          expect(element.is).to.be.equal('twilio-video-call-gui')
        })

        suite('when in progress', function () {
          test('.media-preview should be hidden', function (done) {
            var previewEl = Polymer.dom(element.root).querySelector('.media-preview')

            expect(element.isInProgress).to.equal(false)
            expect(previewEl.hasAttribute('hidden')).to.equal(false)

            element.isInProgress = true

            flush(function () {
              expect(previewEl.hasAttribute('hidden')).to.equal(true)
              done()
            })
          })
        })
      })
    </script>
  </body>
</html>
